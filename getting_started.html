

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting started with the Zenzero Setup &mdash; Python NCS tools 0.2 documentation</title>
    
    <link rel="stylesheet" href="static/default.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="Python NCS tools 0.2 documentation" href="index.html" />
    <link rel="next" title="Getting started with the Zaex Setup" href="getting_started_zaex.html" />
    <link rel="prev" title="Hardware Usage" href="hardware_usage.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="getting_started_zaex.html" title="Getting started with the Zaex Setup"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="hardware_usage.html" title="Hardware Usage"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Python NCS tools 0.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="getting-started-with-the-zenzero-setup">
<h1>Getting started with the Zenzero Setup<a class="headerlink" href="#getting-started-with-the-zenzero-setup" title="Permalink to this headline">¶</a></h1>
<p>This is the equivalent of the <tt class="docutils literal"><span class="pre">Hello</span> <span class="pre">World</span></tt> problem using the multi-chip <a class="reference external" href="http://ncs.ethz.ch/ncs/internal/manuals-and-how-tos/experiments-with-ncs-vlsi-chips">zenzero setup</a>. We want to stimulate neurons 20 to 30 on chip 1 and plot a raster of their response, then map all the events from those neurons to the neurons 20 to 30 on chip 2.</p>
<div class="figure align-center">
<img alt="images/zenzero_setup.png" src="images/zenzero_setup.png" style="width: 745px;" />
<p class="caption">The Zenzero Setup</p>
</div>
<div class="section" id="step-by-step-tutorial">
<h2>Step-by-step tutorial<a class="headerlink" href="#step-by-step-tutorial" title="Permalink to this headline">¶</a></h2>
<p><em>Note:</em> This tutorial assumes that you have two ifslwta chips, with or without a retina.</p>
<ol class="arabic simple" start="0">
<li>Make sur you have the Zenzero setup: <a class="reference external" href="http://ncs.ethz.ch/ncs/internal/manuals-and-how-tos/experiments-with-ncs-vlsi-chips">http://ncs.ethz.ch/ncs/internal/manuals-and-how-tos/experiments-with-ncs-vlsi-chips</a>.</li>
<li>On a terminal, start the Amda server with:</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python -c import pyAmdaServer; pyAmdaServer.run<span class="o">()</span>
</pre></div>
</div>
<p>if you get:</p>
<p><tt class="docutils literal"><span class="pre">A</span> <span class="pre">server</span> <span class="pre">is</span> <span class="pre">already</span> <span class="pre">running...</span></tt></p>
<p>don&#8217;t worry and continue.</p>
<ol class="arabic simple" start="2">
<li>Assuming you have a working setup, download and extract all the files in the <a class="reference external" href="http://ncs.ethz.ch/ncs/internal/manuals-and-how-tos/experimental-protocol/experiment-protocol-template/exp_template.zip">experiment protocol template</a>. Then open your favorite editor and create a python script:</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>vim multi_chip_tutorial.py
</pre></div>
</div>
<ol class="arabic" start="3">
<li><p class="first">he first step is the Setup, i.e. loading the appropriate modules in python and let python know what chips you have. Normally you don&#8217;t have to modify this.You can use the package <a class="reference external" href="api.html#module-pyNCS.chipsetup">pyNCS.Setup</a> to initialize the chips with their respective Amda-id and Aex-channel info (see <a class="reference external" href="set-channel-info">Set the Channel information</a>). In order to do this you need two setup files which you can directly download, which are also in the experiment protocol package :</p>
<blockquote>
<div><p><a class="reference external" href="http://ncs.ethz.ch/ncs/internal/manuals-and-how-tos/experiments-with-ncs-vlsi-chips/zenzero.xml">configuration file</a></p>
<p><a class="reference external" href="http://ncs.ethz.ch/ncs/internal/manuals-and-how-tos/experiments-with-ncs-vlsi-chips/zenzero_setuptype.xml">Setup type configuration file</a></p>
</div></blockquote>
</li>
</ol>
<p>The setup is loaded via:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># load setup for zenzero from local dir</span>
<span class="kn">import</span> <span class="nn">pyNCS</span>
<span class="n">setup</span><span class="o">=</span> <span class="n">pyNCS</span><span class="o">.</span><span class="n">Setup</span><span class="p">(</span><span class="s">&#39;zenzero_setuptype.xml&#39;</span><span class="p">)</span>
<span class="n">setup</span><span class="o">.</span><span class="n">load</span><span class="p">(</span> <span class="s">&#39;zenzero.xml&#39;</span> <span class="p">)</span>
<span class="n">setup</span><span class="o">.</span><span class="n">apply</span><span class="p">()</span> <span class="c"># this sets default monitor/sequencer via pyST</span>
</pre></div>
</div>
<p><em>Remark</em> : the provided setup file assumes that you have saved the needed chipfiles in the directory <tt class="docutils literal"><span class="pre">../chipfiles</span></tt></p>
<ol class="arabic simple" start="4">
<li>We would like to set the biases proir to mapping or stimulating. the <a href="#id1"><span class="problematic" id="id2">`experimental protocal template &lt;http://ncs.ethz.ch/internal/experiments-with-ncs-vlsi-chips/experimental-protocol/experiment_protocol_template.zip`_</span></a> has biase settings in the appropriate directory. So the following will set the default biases (parameters) of the neuron</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#Set Default Biases</span>
<span class="n">setup</span><span class="o">.</span><span class="n">chip</span><span class="p">[</span><span class="s">&#39;ifslwta&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loadBiases</span><span class="p">(</span><span class="s">&#39;biases/defaultBiases_ifslwta&#39;</span><span class="p">)</span>
<span class="n">setup</span><span class="o">.</span><span class="n">chip</span><span class="p">[</span><span class="s">&#39;ifslwta&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loadBiases</span><span class="p">(</span><span class="s">&#39;biases/defaultBiases_ifslwta&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li>By default, all biases are turned off (zero weight). Set the weight of the excitatory non-plastic AER synapse on with:</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="n">setup</span><span class="o">.</span><span class="n">chip</span><span class="p">[</span><span class="s">&#39;ifslwta&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">bias</span><span class="o">.</span><span class="n">nsynstdw0</span><span class="o">.</span><span class="n">v</span><span class="o">=</span><span class="mf">0.62</span>
<span class="n">setup</span><span class="o">.</span><span class="n">chip</span><span class="p">[</span><span class="s">&#39;ifslwta&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">bias</span><span class="o">.</span><span class="n">nsynstdw0</span><span class="o">.</span><span class="n">v</span><span class="o">=</span><span class="mf">0.62</span>
</pre></div>
</div>
<span class="target" id="set-channel-info"></span><ol class="arabic simple" start="6">
<li>Now lets create the input. <a class="reference external" href="pyst.html">pyST</a> uses <a class="reference external" href="http://neuralensemble.org/trac/NeuroTools">NeuroTools</a>. NeuroTools distinguishes spike trains and spike lists. A spike Train is just a list of spike times, whereas the spike list is a list of spike trains with <em>addressing information included</em>. The addresses must be given in <em>logical format</em>. See the Matlab <a class="reference external" href="http://www.ini.uzh.ch/~dylan/spike_toolbox/">Spike Toolbox</a> from Dylan Muir for more information about logical addresses.</li>
</ol>
<p>First, create an empty spike list with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stStim</span><span class="o">=</span><span class="n">SpikeList</span><span class="p">([],</span><span class="n">id_list</span><span class="o">=</span><span class="p">[])</span> <span class="c">#Init empty SpikeList first</span>
</pre></div>
</div>
<p>the first argument are the spike times with addresses, the second argument is a list of all the addresses in the chip. You have the choice to initialize them with the spike data, or initialize and empty SpikeList and populated it later. The latter method is more flexible, so we will stick here to that one.</p>
<ol class="arabic simple" start="7">
<li>Create Poisson spike trains with firing rate of 50Hz from <em>retina-style addresses</em> and populate the empty spike list</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#This creates the logical addresses: The addresses correspond to row 20 to 30, column 0, polarity 0 of the retina.</span>
<span class="n">stimulationNeurons</span><span class="o">=</span><span class="n">setup</span><span class="o">.</span><span class="n">seq</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">addrLogicalConstruct</span><span class="p">([</span><span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">stimulationNeurons</span><span class="p">:</span>
    <span class="c">#This creates SpikeTrain objects, which can then be assigned to the spikelist</span>
    <span class="n">stStim</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">STCreate</span><span class="o">.</span><span class="n">poisson_generator</span><span class="p">(</span><span class="n">rate</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">t_start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">t_stop</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
<p>You may visualize the spike list with the following command:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">plot_raster</span><span class="p">(</span><span class="n">stStim</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>This should look like:</p>
<div class="figure align-center" id="ststim">
<img alt="images/fig1.png" src="images/fig1.png" />
<p class="caption">Example of a stimulation spike list raster plot</p>
</div>
<ol class="arabic simple" start="8">
<li>For the moment, the stimulation neurons are &#8220;virtual neurons&#8221; which are not connected to the chip. For this we have to map the stimulation neurons to the hardware neurons. First, as a precaution, empty the mapping table with:</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="n">clearAllMappings</span><span class="p">()</span>
</pre></div>
</div>
<ol class="arabic simple" start="9">
<li>Running the following will connect the stimulation neurons to the VLSI neurons :</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mapping</span><span class="o">=</span><span class="nb">list</span><span class="p">()</span>
<span class="n">source</span><span class="o">=</span><span class="n">setup</span><span class="o">.</span><span class="n">seq</span><span class="o">.</span><span class="n">addrPhysicalConstruct</span><span class="p">({</span><span class="mi">0</span><span class="p">:[</span><span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]})</span>
<span class="n">targets</span><span class="o">=</span><span class="n">setup</span><span class="o">.</span><span class="n">mon</span><span class="o">.</span><span class="n">addrPhysicalConstruct</span><span class="p">({</span><span class="mi">5</span><span class="p">:[</span><span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">),</span><span class="mi">2</span><span class="p">]})</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">source</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">targets</span><span class="p">:</span>
        <span class="n">mapping</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">))</span>
<span class="n">setMappings</span><span class="p">(</span><span class="n">mapping</span><span class="p">)</span> <span class="c">#Send the mappings</span>
</pre></div>
</div>
<ol class="arabic simple" start="10">
<li>You&#8217;re done with the configuration. Now stimulate the neurons:</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stOut</span><span class="o">=</span><span class="n">STAEXIO</span><span class="p">(</span><span class="n">stStim</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="11">
<li>Plot the Raster of chip 1. If everything went well, you should see neurons 20 to 30 firing</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="n">composite_plot</span><span class="p">(</span><span class="n">stOut</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="c">#[1] corresponds to channel 1</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img height="84.0" src="images/aafig-f5de2893097c664f023739ca5eaed0e8e34dd667.svg" width="982.8" /><ol class="arabic simple" start="12">
<li>You can now map the events from one chip to another with:</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="n">source</span> <span class="o">=</span><span class="n">setup</span><span class="o">.</span><span class="n">seq</span><span class="o">.</span><span class="n">addrPhysicalConstruct</span><span class="p">({</span><span class="mi">1</span><span class="p">:[</span><span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">)]})</span>
<span class="n">targets</span><span class="o">=</span><span class="n">setup</span><span class="o">.</span><span class="n">mon</span><span class="o">.</span><span class="n">addrPhysicalConstruct</span><span class="p">({</span><span class="mi">6</span><span class="p">:[</span><span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">),</span><span class="mi">2</span><span class="p">]})</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">source</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">targets</span><span class="p">:</span>
        <span class="n">mapping</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">))</span>
<span class="n">setMappings</span><span class="p">(</span><span class="n">mapping</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that setMappings by default appends to the present mappings. This is why we did not have to repeat the points in 9.</p>
<ol class="arabic simple" start="13">
<li>Plot the Raster of chip 2. If everything went well, you should see neurons 20 to 30 firing on the second chip as well</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="n">composite_plot</span><span class="p">(</span><span class="n">stOut</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="c">#[2] corresponds to channel 2</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img height="84.0" src="images/aafig-f5de2893097c664f023739ca5eaed0e8e34dd667.svg" width="982.8" /></div>
<div class="section" id="explanation-of-some-of-the-biases-for-ifslwta">
<h2>Explanation of (some of) the Biases for IFSLWTA<a class="headerlink" href="#explanation-of-some-of-the-biases-for-ifslwta" title="Permalink to this headline">¶</a></h2>
<p><strong>AER (external) synapses</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ifslwta1</span><span class="o">.</span><span class="n">bias</span><span class="o">.</span><span class="n">nsynstdw0</span><span class="o">.</span><span class="n">v</span>      <span class="c">#Weight of the first excitatory synapse (synapse 2) (range 0 to 0.8)</span>
<span class="n">ifslwta1</span><span class="o">.</span><span class="n">bias</span><span class="o">.</span><span class="n">nsynstdw1</span><span class="o">.</span><span class="n">v</span>      <span class="c">#Weight of the second excitatory synapse (synapse 3) (range 0 to 0.8)</span>
<span class="n">ifslwta1</span><span class="o">.</span><span class="n">bias</span><span class="o">.</span><span class="n">psynaerinhw</span><span class="o">.</span><span class="n">v</span>    <span class="c">#Weight of the AER inhibitory synapse (synapse 0 AND synapse 1) (range 2.5 to 3.3)</span>
</pre></div>
</div>
<p><strong>local (hard-wired) synapses</strong></p>
<div class="highlight-python"><pre>ifslwta1 bias.nsynlocself.v  #First nearest neighbour excitatory synapse
ifslwta1 bias.nsynloclat1.v  #First nearest neighbour excitatory synapse
ifslwta1.bias.nsynloclat2.v  #Second and third nearest Neighbor excitatory synapse (third is half of second)
ifslwta1.bias.nsynexcinh.v   #Excitatory to inhibitory wieght
ifslwta1.bias.psynlocinhth.v #Excitatory to inhibitory wieght
ifslwta1.bias.nlk.v          #Leak bias</pre>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Getting started with the Zenzero Setup</a><ul>
<li><a class="reference internal" href="#step-by-step-tutorial">Step-by-step tutorial</a></li>
<li><a class="reference internal" href="#explanation-of-some-of-the-biases-for-ifslwta">Explanation of (some of) the Biases for IFSLWTA</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="hardware_usage.html"
                        title="previous chapter">Hardware Usage</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="getting_started_zaex.html"
                        title="next chapter">Getting started with the Zaex Setup</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="sources/getting_started.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="getting_started_zaex.html" title="Getting started with the Zaex Setup"
             >next</a> |</li>
        <li class="right" >
          <a href="hardware_usage.html" title="Hardware Usage"
             >previous</a> |</li>
        <li><a href="index.html">Python NCS tools 0.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009, Emre Neftci, Sadique Sheik, Daniel Sonnleithner, Giacomo Indiveri.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>