

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Automatic tuning of parameters &mdash; Python NCS tools 0.2 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Python NCS tools 0.2 documentation" href="../index.html" />
    <link rel="next" title="Use plastic synapses of ifslwta chip" href="learning.html" />
    <link rel="prev" title="The Python Oscilloscope Module" href="pyosc.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="learning.html" title="Use plastic synapses of ifslwta chip"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pyosc.html" title="The Python Oscilloscope Module"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Python NCS tools 0.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="automatic-tuning-of-parameters">
<h1>Automatic tuning of parameters<a class="headerlink" href="#automatic-tuning-of-parameters" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p><em>What follows is the abstract of [Sheik et al., 2010].</em></p>
<p>In the past recent years several research groups have proposed neuromorphic
devices that implement event-based sensors or bio-physically realistic
networks of spiking neurons. It has been argued that these devices can be used
to build event-based systems, for solving real-world applications in real-time,
with efficiencies and robustness that cannot be achieved with conventional
computing technologies.</p>
<p>In order to implement complex event-based neuromorphic systems it is
necessary to interface the neuromorphic sensors and devices
among each other, to robotic platforms, and to workstations (<em>e.g.</em> for
data-logging and analysis). This apparently simple goal requires
painstaking work that spans multiple levels of complexity and
disciplines: from the custom layout of microelectronic circuits and
asynchronous printed circuit boards, to the development of object
oriented classes and methods in software; from electrical engineering
and physics for analog/digital circuit design to neuroscience and
computer science for neural computation and spike-based learning
methods.</p>
<p>Within this context, we present a framework we developed to simplify
the configuration of multi-chip neuromorphic systems, and
automate the mapping of neural network model parameters to
neuromorphic circuit bias values.</p>
<ul class="simple">
<li>cost function</li>
<li>recurrent structure</li>
<li>modularity</li>
</ul>
<div class="section" id="a-block-box-approach">
<h3>A block-box approach<a class="headerlink" href="#a-block-box-approach" title="Permalink to this headline">¶</a></h3>
<p>Many academic groups around the world had already presented their work on the
development of general tools for the control of neuromorphic systems that are
system independent. The package pyNN (pron. <cite>pine</cite>) is one of the most
prominent examples.</p>
<p>Most of these packages where developed with a strong focus on software
simulators, which means the one can write pyNN code which is simulator
independent and then choose which simulator to perform all internal operations
such as integration of differential equations, communication between neurons
and so on. The structure is more or less common to all software simulators:
first prepare the parameters and the run the simulations, usually calling a
<tt class="docutils literal"><span class="pre">run</span></tt> functions. This structure is not compatible with real-time hardware, in
which the computation is always being performed and a real-time interaction
with the system (e.g. monitor, control, stimulate) is needed by the user at any
time.</p>
<p>One of the reason for the independent development of pyTune is its strong focus
on real-time interactive control of general-purpose systems. For example, with
the pyNCS plugin of pyTune, every action the user make, e.g. setting biases,
has an immediate effect. As a consequence, the entire package does not depend
on a one-time-run-like action, which makes the integration with pyNCS seamless.</p>
<p>Most importantly, parameters of VLSI hardware systems are usually very hard to
configure because of the non-idealities of the hardware itself. This is
obviously not a problem with software simulators. Tools like pyNN, which where
first developed for software simulators and then adapted to interface with
specific hardware systems, don&#8217;t contemplate this problem and rely on a
preliminary calibration to infere the system&#8217;s hidden non-idealities and be
able to set &#8211; offline &#8211; parameters such as time constants and so on through a
set of pre-defined equations. With these equations, setting the system
parameters resolves in a more or less one-to-one parameter translation which is
easy and fast.</p>
<p>In addition, calibration procedures can be very time consuming and the high
number of parameters can make them unpractical. Parameters like dark currents
of transistors in a VLSI circuit are also strongly dependent on the conditions
of the environment. For example, even small changes in temperature can affect
their values. As a consequence, multiple calibration procedures needs to be
performed in order to have the right estimation of these parameters when the
environment changes, an aspect that makes this approach even more inefficient
for hardware which is supposed to work on, for example, robotic platforms.</p>
<p>With these considerations in mind we decided to give pyTune the possibility to
directly measure the quantities of interest. This approach has the obvious
drawback of a slower interaction with the system because quantities cannot be
simply translated but have to be directly measured through complex procedures.
However, it has the advantage of a pure black-box approach, which means that
the a complete description of the system is not needed and can be inferred.
This aspect is the one that gives pyTune the flexibility that real-time
hardware-based neuromorphic systems require.</p>
<p>Finally, since hardware-based neuromorphic system are still lacking of a
structure which can be adapted by many groups around the world, every piece of
software that controls them is very hardware dependent. With pyTune we wanted
to give the possibility to write plugins for every neuromorphic system with
minimal effort.</p>
<p>In conclusion, pyTune can be easily interfaced to hardware and software systems
by providing informations for the direct measure of parameters of interest.</p>
</div>
<div class="section" id="dependency-tree">
<h3>Dependency tree<a class="headerlink" href="#dependency-tree" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/pytune.png" src="../_images/pytune.png" style="width: 400px;" />
<p>The pyTune tool-set relies on the translation of the problem into parameter
dependencies.  The user defines each parameter by its measurement routine (in
the form of a <tt class="docutils literal"><span class="pre">getValue</span></tt> function) and its sub-parameters dependencies. At
the lowest level, the parameters are defined only by their interaction with the
hardware, i.e. they represent biases of the circuits. The user can choose a
minimization algorithm from those available in the package or can define custom
methods, to do the optimization that sets the parameters value. Optionally one
can also define a specific cost function, that needs to be minimized. By
default, the cost function is computed as 
where  is the current measured value of the parameter and
<a href="#id1"><span class="problematic" id="id2">:raw-lates:`$p_{desired}$`</span></a> is the desired value. Explicit options (such as
maximum tolerance for the desired value, maximum number of iteration steps,
etc.) can also be passed as arguments to the optimization function.</p>
<p>Finally, the sub-parameters&#8217; methods are mapped by the appropriate plug-in onto
the corresponding driver-calls, in the case of an hardware system, or onto
method calls and variables in the case of a system simulated in software. Each
mapping specific to a system has to be separately implemented and included in
pyTune as a plug-in.</p>
</div>
</div>
<div class="section" id="step-by-step-example">
<h2>Step-by-step example<a class="headerlink" href="#step-by-step-example" title="Permalink to this headline">¶</a></h2>
<p>Here we report an example script that uses pyTune to tune a parameter.
In this example we will try to set the output frequency of a population of
leaky-integrate-and-fire neurons on a chip by injecting a constant current to all the neurons.
The rate at which the neurons fire depends on the amount of current we inject
through the <tt class="docutils literal"><span class="pre">injection_bias</span></tt> bias and the leak of the neuron, which we can
control through the <tt class="docutils literal"><span class="pre">leak_bias</span></tt> bias.</p>
<p>Let&#8217;s write the code for it.
Some import:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">logging.config</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pyNCS</span>
<span class="kn">from</span> <span class="nn">pyTune.plugins.ncs</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">setup</span> <span class="o">=</span> <span class="n">pyNCS</span><span class="o">.</span><span class="n">NeuroSetup</span><span class="p">(</span><span class="s">&#39;/usr/share/ncs/setupfiles/mc_setuptype.xml&#39;</span><span class="p">,</span>
                         <span class="s">&#39;/usr/share/ncs/setupfiles/mc.xml&#39;</span><span class="p">)</span>

<span class="n">setup</span><span class="o">.</span><span class="n">chips</span><span class="p">[</span><span class="s">&#39;ifslwta&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loadBiases</span><span class="p">(</span><span class="s">&#39;biases/Biases_ifslwta&#39;</span><span class="p">)</span>
<span class="n">pop</span> <span class="o">=</span> <span class="n">pyNCS</span><span class="o">.</span><span class="n">Population</span><span class="p">(</span><span class="s">&#39;pop&#39;</span><span class="p">,</span><span class="s">&#39;Population of neurons&#39;</span><span class="p">)</span>
<span class="n">pop</span><span class="o">.</span><span class="n">populate_by_number</span><span class="p">(</span><span class="n">setup</span><span class="p">,</span> <span class="s">&#39;ifslwta&#39;</span><span class="p">,</span> <span class="s">&#39;excitatory&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>Now the parameter definition part. Every parameter can usually be created by
calling its class with only description string arguments:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rate_param</span> <span class="o">=</span> <span class="n">Rate</span><span class="p">(</span><span class="n">paramid</span><span class="o">=</span><span class="s">&#39;rate&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>At this point the parameter is an empty class. We need to tell the system which
part of the system this parameter belongs to. This is done with a specific
<tt class="docutils literal"><span class="pre">set_context</span></tt> function of each parameter. This function is like an
initialization function and obviously each parameter accepts different
arguments. For example, the <tt class="docutils literal"><span class="pre">Rate</span></tt> parameter wants a <tt class="docutils literal"><span class="pre">pyNCS.Population</span></tt> as
argument:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rate_param</span><span class="o">.</span><span class="n">setContext</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span>
</pre></div>
</div>
<p>After the declaration, the system has automatically created all the parameters
on which the rate depends on. Now, the reader should keep in mind that a
parameter is nothing more than a variable in the RAM of our computer until with
<em>set its context</em>, as we mentioned earlier. This means that also the injection
bias and the leak bias have to be initialized. Just by chance, also these two
accept a population as argument:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rate_param</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s">&#39;injection_bias&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setContext</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span>
<span class="n">rate_param</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s">&#39;leak_bias&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setContext</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we can set some starting value for the biases:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rate_param</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s">&#39;injection_bias&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mf">2.71</span><span class="p">)</span>
<span class="n">rate_param</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s">&#39;leak_bias&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mf">0.16</span><span class="p">)</span>
</pre></div>
</div>
<p>Every parameter has a <tt class="docutils literal"><span class="pre">getValue</span></tt> and <tt class="docutils literal"><span class="pre">setValue</span></tt> function. The leak and the
injection are two special parameters because they don&#8217;t depend on anything,
they basically <em>are</em> two biases of the chip, while in general each parameter
(parent) depends on some other parameters (children).  When we want to set a
parent, the system automatically follows its children and modifies them until
the parent reaches the value that we wanted to set.</p>
<p>The way the system wanders the dependency tree is specified by a <em>method</em> which
can be specified as an argument to the call of a <tt class="docutils literal"><span class="pre">set_value</span></tt> function.
The methods we can use to search in the parameter space accept a
<tt class="docutils literal"><span class="pre">searchparams</span></tt> python dictionary. The latter collects informations that are
specific for the method we use. For example, if we use a linear-step search, we
have to choose the size of the step.</p>
<p>In this example we use a linear search. We have to create the <tt class="docutils literal"><span class="pre">searchparams</span></tt>
dictionary if we don&#8217;t want to use default values:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">v</span> <span class="o">=</span> <span class="mf">50.0</span> <span class="c"># the value we want to set, in Hz</span>
<span class="n">delta</span> <span class="o">=</span> <span class="o">.</span><span class="mi">1</span> <span class="o">*</span> <span class="n">expected</span> <span class="c"># tolerance to 10% of the expected value</span>
<span class="n">searchparams</span><span class="o">=</span> <span class="p">{</span><span class="s">&#39;rate&#39;</span><span class="p">:{</span>
                       <span class="s">&#39;tolerance&#39;</span><span class="p">:</span><span class="n">delta</span><span class="p">,</span> <span class="c"># stop until rate is in the</span>
                                          <span class="c"># range [v-delta,v+delta]</span>
                       <span class="p">},</span>
               <span class="s">&#39;injection_bias&#39;</span><span class="p">:{</span>
                       <span class="s">&#39;max&#39;</span><span class="p">:</span><span class="mf">2.9</span><span class="p">,</span>   <span class="c"># we can limit the parameter space</span>
                       <span class="s">&#39;min&#39;</span><span class="p">:</span><span class="mf">2.7</span><span class="p">,</span>
                       <span class="s">&#39;step&#39;</span><span class="p">:</span><span class="mf">0.0025</span><span class="p">,</span>
                       <span class="p">},</span>
               <span class="s">&#39;leak_bias&#39;</span><span class="p">:{</span>
                       <span class="s">&#39;max&#39;</span><span class="p">:</span><span class="mf">0.2</span><span class="p">,</span>
                       <span class="s">&#39;min&#39;</span><span class="p">:</span><span class="mf">0.14</span><span class="p">,</span>
                       <span class="p">},</span>
                       <span class="c">#&#39;step&#39;:0.005}, # here we use a default value</span>
              <span class="p">}</span>
</pre></div>
</div>
<p>Now we are ready!</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">x</span> <span class="o">=</span> <span class="n">rate_param</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">searchparams</span><span class="p">)</span>
<span class="k">if</span> <span class="n">x</span><span class="o">&lt;</span><span class="p">(</span><span class="n">v</span><span class="o">-</span><span class="n">delta</span><span class="p">)</span> <span class="ow">or</span> <span class="n">x</span><span class="o">&gt;</span><span class="p">(</span><span class="n">v</span><span class="o">+</span><span class="n">delta</span><span class="p">):</span>
    <span class="k">raise</span> <span class="n">Error</span><span class="p">,</span> <span class="s">&quot;pyTune doesn&#39;t work...&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="implementation-of-new-parameters">
<h2>Implementation of new parameters<a class="headerlink" href="#implementation-of-new-parameters" title="Permalink to this headline">¶</a></h2>
<p>With pyTune it is possible to control every parameter of a system
independently. Each parameter has to be described in a couple of specific files
that the engine will use to properly handle it. Since pyTune relies on direct
measure of parameters, there will be one file that explicitly implements the
way the system can measure one parameter. Technically, it consists of a Python
Class. A second file contains the informations about the dependencies of the
parameter on other parameters of the system.</p>
<p>In what follows we show how to implement a new parameter for the pyNCS system.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since it is the set of implemented parameters that constitutes a
<cite>plugin</cite> for pyTune, the following sections can be use as a reference
also to write new plugins.</p>
</div>
<div class="section" id="the-python-file-template">
<h3>The python file template<a class="headerlink" href="#the-python-file-template" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># -*- coding: utf-8 -*-</span>

<span class="c"># HELLO,</span>
<span class="c"># THIS IS A TEMPLATE FOR THE CREATION OF PARAMETERS IN THE NCS PLUGIN OF</span>
<span class="c"># pyTune. PLEASE READ ALL THE STRINGS WRITTEN IN CAPITAL LETTERS AND FOLLOW THE</span>
<span class="c"># DESCRIBED CONVENTIONS AS MUCH AS POSSIBLE.</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">with_statement</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">path</span>
<span class="kn">from</span> <span class="nn">pyTune.base</span> <span class="kn">import</span> <span class="n">Parameter</span>
<span class="kn">from</span> <span class="nn">pyAex</span> <span class="kn">import</span> <span class="n">netClient</span>
<span class="c">#from pyOsc import pyOsc</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="c"># DEFINE SCOPE CHANNELS HERE #</span>
<span class="c">#global scope</span>
<span class="c">#scope = pyOsc.Oscilloscope( driver(debug=True) )</span>
<span class="c">#scope.names( {</span>
  <span class="c">#0 : &#39;Vmem127&#39;,</span>
  <span class="c">#1 : &#39;Vsyn (&quot;Vpls&quot;)&#39;,</span>
  <span class="c">#2 : &#39;Vpls (&quot;Vsyn&quot;)&#39;,</span>
  <span class="c">#3 : &#39;VsynAER&#39;,</span>
  <span class="c">#4 : &#39;VplsAER&#39;,</span>
  <span class="c">#5 : &#39;Vk&#39;,</span>
  <span class="c">#6 : &#39;Vwstd&#39;,</span>
  <span class="c">#7 : &#39;Vmem (scanner)&#39; })</span>

<span class="k">class</span> <span class="nc">Template</span><span class="p">(</span><span class="n">Parameter</span><span class="p">):</span> <span class="c"># REPLACE WITH NameOfYourParameter</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    DESCRIBE PARAMETER HERE.</span>
<span class="sd">    Units: &quot;UNITS HERE&quot;</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paramid</span><span class="o">=</span><span class="s">&#39;Template&#39;</span><span class="p">,</span> <span class="c"># if your parameter has a long name:</span>
                                           <span class="c"># PlesaUseThisFormat</span>
                 <span class="n">xmlfilename</span><span class="o">=</span><span class="s">&#39;template.xml&#39;</span><span class="p">,</span> <span class="c"># now instead, use_this_format</span>
                 <span class="n">history_filename</span><span class="o">=</span><span class="s">&#39;template.history&#39;</span><span class="p">):</span> <span class="c"># and_also_here</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># DON&#39;T FORGET TO CREATE your_parameter.xml!</span>
        <span class="c"># PLEASE DON&#39;T MODIFY THIS</span>
        <span class="n">resources</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">),</span> <span class="n">xmlfilename</span><span class="p">)</span>
        <span class="n">history_filename</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">),</span> <span class="n">history_filename</span><span class="p">)</span>
        <span class="n">Parameter</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paramid</span><span class="p">,</span> <span class="n">xml</span><span class="o">=</span><span class="n">resources</span><span class="p">,</span> <span class="n">history_filename</span><span class="o">=</span><span class="n">history_filename</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">setContext</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">population</span><span class="p">,</span> <span class="n">synapses_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        THIS SETS THE context OF A PARAMETER, I.E. POPULATION(S) ON WHICH IT</span>
<span class="sd">        ACTS. PLEASE DESCRIBE ARGUMENTS HERE, AS SHOWN IN THE FOLLOWING</span>
<span class="sd">        EXAMPLE.</span>
<span class="sd">        Sets the context for the parameter. Arguments are:</span>
<span class="sd">          - population = pyNCS.Population</span>
<span class="sd">          - synapses_id = The string of the synapses (e.g. &#39;excitatory0&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># DEFINE YOUR context HERE, FOR EXAMPLE:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">neurons</span> <span class="o">=</span> <span class="n">population</span><span class="o">.</span><span class="n">soma</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">synapses</span> <span class="o">=</span> <span class="n">population</span><span class="o">.</span><span class="n">synapses</span><span class="p">[</span><span class="n">synapses_id</span><span class="p">]</span>

        <span class="c"># DON&#39;T FORGET YOU CAN USE Population.neuronblock, IN WHICH YOU FIND</span>
        <span class="c"># ALL THE BIASES THAT YOU NEED. SEE EXAMPLE:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bias</span> <span class="o">=</span> <span class="n">population</span><span class="o">.</span><span class="n">neuronblock</span><span class="o">.</span><span class="n">synapses</span><span class="p">[</span><span class="n">synapses_id</span><span class="p">]</span><span class="o">.</span><span class="n">biases</span><span class="p">[</span><span class="s">&#39;tau&#39;</span><span class="p">]</span>

    <span class="c"># THE SET OF FUNCTIONS STARTING WITH DOUBLE UNDERSCORE REPLACE THE ONES</span>
    <span class="c"># INHERITED FROM pyTune.Parameter</span>

    <span class="k">def</span> <span class="nf">__getValue__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        DESCRIBE HOW THE FUNCTION WORKS.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># YOU ALWAYS HAVE TO IMPLEMENT A GET FUNCTION.</span>
        <span class="c"># DON&#39;T FORGET YOU CAN DEFINE __getvalue_startup__ IF YOU NEED TO DO</span>
        <span class="c"># SOME OPERATION BEFORE THE ACUTAL MEASURE (IT IS AUTOMATICALLY CALLED,</span>
        <span class="c"># PLEASE *DON&#39;T* CALL IT HERE.</span>
        <span class="c"># IF THE VALUE IS A FUNCTION OF THE VALUE OF THE SUB-PARAMETERS, YOU</span>
        <span class="c"># CAN CALL THEM EXPLICITLY HERE VIA:</span>
        <span class="c"># Parameter.parameters[&#39;name_of_subparameter&#39;].getValue()</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">__setValue__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">searchparams</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        DESCRIBE HOW THE FUNCTION WORKS.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># YOU DON&#39;T NECESSARILY NEED TO SPECIFY A SET FUNCTION. IF YOU DON&#39;T</span>
        <span class="c"># SPECIFY HERE, A RECURSIVE FUNCTION WILL BE USED [TODO: is this true?]</span>
        <span class="c"># searchparams IS A DICTIONARY CONTAINING ALL THE ADDITIONAL</span>
        <span class="c"># INFORMATIONS YOUR ALGORITHM NEEDS, SUCH AS TOLERANCE, INCREMENT STEP</span>
        <span class="c"># SIZE, ETC. AN EXAMPLE IS THE FOLLOWING:</span>
        <span class="c">#   searchparams = {</span>
        <span class="c">#       &#39;tolerance_style&#39; : &#39;%&#39;,</span>
        <span class="c">#       &#39;template&#39; : {&#39;tolerance&#39; : 20,</span>
        <span class="c">#                     &#39;max&#39; : 10,</span>
        <span class="c">#                     &#39;min&#39; : 0,</span>
        <span class="c">#                     &#39;step&#39; : 1,</span>
        <span class="c">#                     &#39;step_type&#39; : &#39;linear&#39;,</span>
        <span class="c">#                    }</span>
        <span class="c">#       &#39;subparam1&#39; : {&#39;tolerance&#39; : 10,</span>
        <span class="c">#                      &#39;max&#39; : 4,</span>
        <span class="c">#                      &#39;min&#39; : 3,</span>
        <span class="c">#                      &#39;step&#39; : 0.1,</span>
        <span class="c">#                      &#39;step_type&#39; : &#39;exponential&#39;,</span>
        <span class="c">#                     }</span>
        <span class="c">#       &#39;subparam2&#39; : {&#39;tolerance&#39; : 10,</span>
        <span class="c">#                     }</span>
        <span class="c">#   }</span>
        <span class="c"># PLEASE NOTICE: DON&#39;T FORGET TO DEFINE A FUNCTION THAT LOOKS WHEITHER</span>
        <span class="c"># THE SEARCHPARAMS HAVE BEEN DEFINED AND PUTS DEFAULT VALUES</span>
        <span class="c"># INSTEAD.</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">__get_method__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c"># PLEASE REPLACE method WITH THE</span>
                              <span class="c"># name_of_the_method</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        DESCRIBE HOW THE METHOD WORKS.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># IMPLEMENT YOUR OWN METHOD HERE. FOR EXAMPLE, YOU MAY HAVE TWO</span>
        <span class="c"># DIFFERENT WAYS TO MEASURE YOUR PARAMETER, ONE USING THE SCOPE ONE</span>
        <span class="c"># USING SPIKING DATA. YOU CAN THEN DEFINE __get_scope__ AND</span>
        <span class="c"># __get_spiking__. YOU CAN DEFINE AS MANY METHOD AS YOU WANT AND THEN</span>
        <span class="c"># CALL THEM IN YOUR SCRIPT BY:</span>
        <span class="c"># getValue(method=&#39;your_method_here&#39;)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">__set_method__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">searchparams</span><span class="p">):</span> <span class="c"># PLEASE REPLACE method WITH THE</span>
                              <span class="c"># name_of_the_method</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        DESCRIBE HOW THE METHOD WORKS.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># IMPLEMENT YOUR METHOD HERE. READ __get_method__ COMMENTS TO KNOW MORE</span>
        <span class="c"># ABOUT METHODS.</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">__get_startup__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># THIS FUNCTION IS CALLED AT EVERY getValue CALL AND IT IS USED TO</span>
        <span class="c"># APPLY PRELIMINARY SETTING IF NEEDED, E.G. SET ALL LEARNING SYNAPSES</span>
        <span class="c"># TO HIGH IF YOU WANT TO MEASURE THEIR EFFICACY.</span>
        <span class="k">return</span>

    <span class="k">def</span> <span class="nf">__set_startup__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># THIS FUNCTION IS CALLED AT EVERY setValue CALL AND IT IS USED TO</span>
        <span class="c"># APPLY PRELIMINARY SETTING IF NEEDED</span>
        <span class="k">return</span>
</pre></div>
</div>
</div>
<div class="section" id="the-xml-file-template">
<h3>The xml file template<a class="headerlink" href="#the-xml-file-template" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>&lt;?xml version="1.0" ?&gt;
&lt;parameter paramid='example_parameter' class='ExampleParameter'&gt;
    &lt;MAX&gt;inf&lt;/MAX&gt;
    &lt;MIN&gt;0&lt;/MIN&gt;
    &lt;units&gt;Hz&lt;/units&gt;
    &lt;!--&lt;method&gt;linearSweep&lt;/method&gt;--&gt;
    &lt;deps&gt;
        &lt;parameter paramid='efficacy' class='Efficacy'/&gt;
        &lt;parameter paramid='injection_bias' class='Bias'/&gt;
    &lt;/deps&gt;
&lt;/parameter&gt;</pre>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Automatic tuning of parameters</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#a-block-box-approach">A block-box approach</a></li>
<li><a class="reference internal" href="#dependency-tree">Dependency tree</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-by-step-example">Step-by-step example</a></li>
<li><a class="reference internal" href="#implementation-of-new-parameters">Implementation of new parameters</a><ul>
<li><a class="reference internal" href="#the-python-file-template">The python file template</a></li>
<li><a class="reference internal" href="#the-xml-file-template">The xml file template</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="pyosc.html"
                        title="previous chapter">The Python Oscilloscope Module</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="learning.html"
                        title="next chapter">Use plastic synapses of <tt class="docutils literal docutils literal docutils literal"><span class="pre">ifslwta</span></tt> chip</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/general/pytune.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="learning.html" title="Use plastic synapses of ifslwta chip"
             >next</a> |</li>
        <li class="right" >
          <a href="pyosc.html" title="The Python Oscilloscope Module"
             >previous</a> |</li>
        <li><a href="../index.html">Python NCS tools 0.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, University of Zurich, Emre Neftci, Sadique Sheik, Fabio Stefanini, Giacomo Indiveri.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>